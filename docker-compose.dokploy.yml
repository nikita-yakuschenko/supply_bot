# Бот и Supabase на одном VPS. Чтобы бот достучался до БД по 127.0.0.1:6543,
# используем network_mode: host (контейнер в сети хоста).
# В .env на сервере: DATABASE_URL=postgresql://user:pass@127.0.0.1:6543/postgres

services:
  foremans-orders-bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: foremans-orders-bot
    restart: unless-stopped
    network_mode: host
    env_file:
      - .env
    command: ["python", "main.py"]
    volumes:
      - bot_data:/app/data

volumes:
  bot_data:
